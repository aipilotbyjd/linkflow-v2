app:
  name: linkflow
  environment: development
  debug: true
  url: http://localhost:8080
  frontend_url: http://localhost:3000

server:
  host: 0.0.0.0
  port: 8090
  read_timeout: 15s
  write_timeout: 15s
  idle_timeout: 60s

database:
  host: ep-small-shape-ae6ykhty-pooler.c-2.us-east-2.aws.neon.tech
  port: 5432
  user: neondb_owner
  password: npg_lp9WJUbOq0NF
  name: neondb
  sslmode: require
  max_open_conns: 10
  max_idle_conns: 5
  conn_max_lifetime: 5m

redis:
  host: super-ringtail-49528.upstash.io
  port: 6379
  password: "AcF4AAIncDFmZGU2YWJmNzY1Y2Y0MjMzYjhiMDE3ZWMzMGMzMWExYnAxNDk1Mjg"
  db: 0
  tls: true

jwt:
  secret: "change-this-to-a-32-character-key"
  access_expiry: 15m
  refresh_expiry: 168h  # 7 days
  issuer: linkflow

oauth:
  google:
    client_id: ""
    client_secret: ""
    redirect_url: http://localhost:8080/api/v1/auth/oauth/google/callback
  github:
    client_id: ""
    client_secret: ""
    redirect_url: http://localhost:8080/api/v1/auth/oauth/github/callback
  microsoft:
    client_id: ""
    client_secret: ""
    redirect_url: http://localhost:8080/api/v1/auth/oauth/microsoft/callback

s3:
  endpoint: ""
  region: us-east-1
  bucket: linkflow
  access_key_id: ""
  secret_access_key: ""
  use_ssl: true

stripe:
  secret_key: ""
  webhook_secret: ""
  publishable_key: ""

smtp:
  host: ""
  port: 587
  username: ""
  password: ""
  from: ""
  from_name: LinkFlow

# Feature flags and configurations
features:
  webhook_stream:
    # Enable Redis Streams for durable webhook buffering
    # When enabled, webhooks are buffered to Redis Streams before processing
    # This prevents webhook loss during high traffic or system restarts
    enabled: true
    
    # Maximum messages to keep in the stream (older are trimmed)
    max_len: 100000
    
    # Maximum messages in dead letter queue (failed webhooks)
    dlq_max_len: 10000
    
    # Number of messages to process per batch
    batch_size: 10
    
    # Max retry attempts before moving to DLQ
    max_retries: 3
    
    # Seconds before a pending message is considered stale
    stale_timeout: 300
    
    # Number of consumer goroutines in worker
    consumer_count: 2
